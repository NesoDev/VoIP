; --- Transports ---
; UDP Transport (Standard SIP for Linphone/Zoiper)
[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060
; local_net=192.168.0.0/16
local_net=172.16.0.0/12
local_net=10.0.0.0/8
external_media_address=192.168.1.100
external_signaling_address=192.168.1.100

; WebSocket Transport (For WebRTC)
[transport-ws]
type=transport
protocol=ws
bind=0.0.0.0:8088
external_media_address=192.168.1.100
external_signaling_address=192.168.1.100

; --- Templates ---
; Standard Endpoint (For Linphone)
[endpoint_standard](!)
type=endpoint
context=from-internal
disallow=all
allow=ulaw,alaw,gsm,opus
direct_media=no
force_rport=yes
rewrite_contact=yes
rtcp_mux=no
identify_by=username

; Auth Template
[auth_user](!)
type=auth
auth_type=userpass
password=1234
realm=asterisk

; AOR Template
[aor_dynamic](!)
type=aor
max_contacts=5
remove_existing=yes

; --- Extensions (Standard SIP) ---

; Extension 101 (Para Linphone PC)
[101](endpoint_standard)
auth=auth101
aors=101
[auth101](auth_user)
username=101
[101](aor_dynamic)
[identify101]
type=identify
endpoint=101
match=101

; Extension 201 (Para Linphone MÃ³vil/Otro)
[201](endpoint_standard)
auth=auth201
aors=201
[auth201](auth_user)
username=201
[201](aor_dynamic)
[identify201]
type=identify
endpoint=201
match=201

; --- WebRTC Extensions (Keep them just in case) ---
[100](endpoint_standard)
auth=auth100
aors=100
use_avpf=yes
media_encryption=dtls
dtls_verify=fingerprint
dtls_setup=actpass
dtls_cert_file=/etc/asterisk/keys/asterisk.pem
dtls_private_key=/etc/asterisk/keys/asterisk.key
[auth100](auth_user)
username=100
[100](aor_dynamic)
[identify100]
type=identify
endpoint=100
match=100

; --- Dynamic Users ---
#include pjsip_custom.conf
